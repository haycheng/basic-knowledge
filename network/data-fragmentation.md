# 计算机网络中的数据分包传输

## 关于MTU
MTU(Maximum Transmission Unit)即最大传输单元，是指在无需分段的情况下，可以传输的最大IP报文（包含IP头部和报文实体，即更高层协议的相关数据）。

## IP数据报分片
IP协议允许数据包（datagram）进行分片（fragmentation），将数据包分割成更小的单位。这样的话，当数据包比链路最大传输单元（MTU）大时，就可以被分解为很多的足够小片段，以便能够在其上进行传输。

IP数据包报头中的中有个2字节（16 bit）的字段，标识IP数据包中报头和数据的总长度。由于该字段只有2个字节，因此一个IP数据包的最大长度为65536。

一个IP数据包如果超过MTU的限制，在从网络层送到网络接口层前，需要将数据进行拆分。IP报头中有个标识符，是由源主机产生的一个随机数，用来唯一标识该IP包。根据网络接口层MTU的限制，将数据拆分成一个个小包，并组装成一个个完整的IP包，这些IP包的报头标识都是一样的。另外，IP报头中还有两个字段，一个是分段标识，表示该数据包是一个完整的数据包，或只是拆分後的一个分段；另一个字段是13 bit的偏移量，用来标识当前包在分段序列中位置（若未分段则为0）。


### 参考文档
1. [IP数据报报头详解](https://blog.51cto.com/136067756/415912)
1. [维基百科：最大传输单元](https://zh.wikipedia.org/wiki/%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83)
