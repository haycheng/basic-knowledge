# 程序设计的一些原则

对于前端可以重试的，系统不稳定时直接抛出错误；
对于前端不能重试的，系统暂时不可用时，通过落库、消息等将失败的处理存储起来，并进行异步重试。

对于消息，如果一次获取多条，那么如果其中几条消费失败，如何设置消费位移？

对于消息的重复消费问题，需要消费端做对应的幂等处理。
可以通过记录的状态来识别重复消息，比如订单在之前前状态为“未支付”，接收到支付消息後，更新状态为“已支付”。再次接收到重复的支付消息时，查看订单的状态为已支付，则忽略掉该消息。
有两种解决方案：
1. 
首先，消息中必须带有业务的唯一标识，如订单ID等
